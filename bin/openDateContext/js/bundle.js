var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**This class is automatically generated by LayaAirIDE, please do not make any modifications. */


var _BigItem = require("./view/BigItem");

var _BigItem2 = _interopRequireDefault(_BigItem);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var GameConfig = function () {
    function GameConfig() {
        _classCallCheck(this, GameConfig);
    }

    _createClass(GameConfig, null, [{
        key: "init",
        value: function init() {
            //注册Script或者Runtime引用
            var reg = Laya.ClassUtils.regClass;
            reg("view/BigItem.js", _BigItem2.default);
        }
    }]);

    return GameConfig;
}();

exports.default = GameConfig;

GameConfig.width = 640;
GameConfig.height = 1136;
GameConfig.scaleMode = "fixedwidth";
GameConfig.screenMode = "none";
GameConfig.alignV = "top";
GameConfig.alignH = "left";
GameConfig.startScene = "test/Big.scene";
GameConfig.sceneRoot = "";
GameConfig.debug = false;
GameConfig.stat = false;
GameConfig.physicsDebug = false;
GameConfig.exportSceneToJson = true;

GameConfig.init();

},{"./view/BigItem":4}],2:[function(require,module,exports){
"use strict";

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _GameConfig = require("./GameConfig");

var _GameConfig2 = _interopRequireDefault(_GameConfig);

var _BigRank = require("./view/BigRank");

var _BigRank2 = _interopRequireDefault(_BigRank);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Main = function () {
	function Main() {
		_classCallCheck(this, Main);

		Laya.isWXOpenDataContext = true;
		Laya.isWXPosMsg = true;
		//根据IDE设置初始化引擎		
		Laya.init(_GameConfig2.default.width, _GameConfig2.default.height, false);
		//根据IDE设置初始化引擎		
		Laya.stage.scaleMode = _GameConfig2.default.scaleMode;
		Laya.stage.screenMode = _GameConfig2.default.screenMode;
		Laya.stage.alignV = _GameConfig2.default.alignV;
		Laya.stage.alignH = _GameConfig2.default.alignH;
		// 关于透传接口，请参考: https://ldc2.layabox.com/doc/?nav=zh-ts-5-0-7
		if (Laya.Browser.onMiniGame) wx.onMessage(function (data) {
			if (data.url == "res/atlas/test.atlas") {
				Laya.loader.load("res/atlas/test.atlas", Laya.Handler.create(this, this.onComplete));
			}
		}.bind(this));else Laya.loader.load("res/atlas/test.atlas", Laya.Handler.create(this, this.onComplete));
	}

	_createClass(Main, [{
		key: "onComplete",
		value: function onComplete() {
			//加载IDE指定的场景
			var big = new _BigRank2.default();
			big.init();
		}
	}]);

	return Main;
}();
//激活启动类


new Main();

},{"./GameConfig":1,"./view/BigRank":5}],3:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
	value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

/**This class is automatically generated by LayaAirIDE, please do not make any modifications. */
var View = laya.ui.View;
var Dialog = laya.ui.Dialog;
var Scene = Laya.Scene;
var REG = Laya.ClassUtils.regClass;

var BigUI = exports.BigUI = function (_View) {
	_inherits(BigUI, _View);

	function BigUI() {
		_classCallCheck(this, BigUI);

		return _possibleConstructorReturn(this, (BigUI.__proto__ || Object.getPrototypeOf(BigUI)).call(this));
	}

	_createClass(BigUI, [{
		key: "createChildren",
		value: function createChildren() {
			_get(BigUI.prototype.__proto__ || Object.getPrototypeOf(BigUI.prototype), "createChildren", this).call(this);
			this.createView(BigUI.uiView);
		}
	}]);

	return BigUI;
}(View);

BigUI.uiView = { "type": "View", "props": { "width": 610, "height": 757 }, "compId": 2, "child": [{ "type": "Sprite", "props": { "y": 0, "x": 0, "texture": "test/2.png" }, "compId": 4 }, { "type": "List", "props": { "y": 107, "x": 13, "width": 585, "var": "_list", "vScrollBarSkin": " ", "spaceY": 20, "repeatX": 1, "height": 639, "elasticEnabled": true }, "compId": 3, "child": [{ "type": "bigItem", "props": { "runtime": "view/BigItem.js", "renderType": "render" }, "compId": 5 }] }], "loadList": ["test/2.png"], "loadList3D": [] };
REG("ui.test.BigUI", BigUI);

var BigItemUI = exports.BigItemUI = function (_View2) {
	_inherits(BigItemUI, _View2);

	function BigItemUI() {
		_classCallCheck(this, BigItemUI);

		return _possibleConstructorReturn(this, (BigItemUI.__proto__ || Object.getPrototypeOf(BigItemUI)).call(this));
	}

	_createClass(BigItemUI, [{
		key: "createChildren",
		value: function createChildren() {
			_get(BigItemUI.prototype.__proto__ || Object.getPrototypeOf(BigItemUI.prototype), "createChildren", this).call(this);
			this.createView(BigItemUI.uiView);
		}
	}]);

	return BigItemUI;
}(View);

BigItemUI.uiView = { "type": "View", "props": { "width": 580, "height": 100 }, "compId": 2, "child": [{ "type": "Sprite", "props": { "y": 0, "x": 0, "width": 575, "texture": "test/3.png", "height": 99 }, "compId": 7 }, { "type": "Image", "props": { "y": 6, "x": 22, "width": 80, "var": "img_head", "skin": "test/4.png", "height": 80 }, "compId": 3, "child": [{ "type": "Sprite", "props": { "y": -1, "x": -1, "width": 82, "texture": "test/c1.png", "renderType": "mask", "height": 82 }, "compId": 10 }] }, { "type": "Label", "props": { "y": 38.5, "x": 136, "width": 259, "var": "text_name", "text": "名字", "overflow": "scroll", "height": 24, "fontSize": 20, "font": "Microsoft YaHei", "color": "#ffffff", "align": "center" }, "compId": 4 }, { "type": "Label", "props": { "y": 42.5, "x": 496, "var": "text_score", "text": "分数", "fontSize": 20, "color": "#ffffff", "align": "center" }, "compId": 5 }], "loadList": ["test/3.png", "test/4.png", "test/c1.png"], "loadList3D": [] };
REG("ui.test.BigItemUI", BigItemUI);

},{}],4:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _layaMaxUI = require("../ui/layaMaxUI");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BigItem = function (_BigItemUI) {
    _inherits(BigItem, _BigItemUI);

    function BigItem() {
        _classCallCheck(this, BigItem);

        return _possibleConstructorReturn(this, (BigItem.__proto__ || Object.getPrototypeOf(BigItem)).call(this));
    }

    _createClass(BigItem, [{
        key: "dataSource",
        set: function set(value) {
            if (!value) return;
            this.img_head.skin = value.avatarIP;
            this.text_name.text = value.UserName;
            this.text_score.text = value.RankValue;
        }
    }]);

    return BigItem;
}(_layaMaxUI.BigItemUI);

exports.default = BigItem;

},{"../ui/layaMaxUI":3}],5:[function(require,module,exports){
"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _layaMaxUI = require("../ui/layaMaxUI");

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

var BigRank = function (_BigUI) {
    _inherits(BigRank, _BigUI);

    function BigRank() {
        _classCallCheck(this, BigRank);

        var _this = _possibleConstructorReturn(this, (BigRank.__proto__ || Object.getPrototypeOf(BigRank)).call(this));

        _this._key = "test10086";
        //默认数据
        _this.arr = [{ index: 1, avatarIP: 'test/4.png', UserName: "测试用户1", RankValue: 100 }, { index: 2, avatarIP: 'test/4.png', UserName: "测试用户2", RankValue: 75 }, { index: 3, avatarIP: 'test/4.png', UserName: "测试用户3", RankValue: 50 }, { index: 4, avatarIP: 'test/4.png', UserName: "测试用户4", RankValue: 25 }];
        return _this;
    }

    _createClass(BigRank, [{
        key: "init",
        value: function init() {
            //将场景加到舞台上
            Laya.stage.addChild(this);
            //设置默认数据
            this.setlist(this.arr);
            // Laya.stage.visible  = false;
            if (Laya.Browser.onMiniGame) {
                //接受来自主域的信息
                wx.onMessage(this.recevieData.bind(this));
                // 直接展示数据
                this.getFriendData();
            }
        }

        /**
         * 获取好友排行
         */

    }, {
        key: "getFriendData",
        value: function getFriendData() {
            var _$this = this;
            wx.getFriendCloudStorage({
                keyList: [this._key],
                success: function success(res) {
                    //关于拿到的数据详细情况可以产看微信文档
                    //https://developers.weixin.qq.com/minigame/dev/api/UserGameData.html
                    var listData;
                    var obj;
                    var kv;
                    var arr = [];
                    console.log('-----------------getFriendCloudStorage------------');
                    if (res.data) {
                        for (var i = 0; i < res.data.length; i++) {
                            obj = res.data[i];
                            if (!obj.KVDataList.length) continue;
                            //拉取数据是，使用了多少个key- KVDataList的数组就有多少
                            //更详细的KVData可以查看微信文档:https://developers.weixin.qq.com/minigame/dev/api/KVData.html
                            kv = obj.KVDataList[0];
                            if (kv.key != _$this._key) continue;
                            kv = JSON.parse(kv.value);
                            listData = {};
                            listData.avatarIP = obj.avatarUrl;
                            listData.UserName = obj.nickname;
                            listData.openID = obj.openid;
                            listData.RankValue = kv.wxgame.value1;
                            listData.update_time = kv.wxgame.update_time;
                            arr.push(listData);
                        }
                        //根据RankValue排序
                        arr = arr.sort(function (a, b) {
                            return b.RankValue - a.RankValue;
                        });
                        //增加一个用于查看的index排名
                        for (var i = 0; i < arr.length; i++) {
                            arr[i].index = i + 1;
                        }
                        //设置数组
                        _$this.setlist(arr);
                    }
                },
                fail: function fail(data) {
                    console.log('------------------获取托管数据失败--------------------');
                    console.log(data);
                }
            });
        }
        /**
         * 接收信息
         * @param message 收到的主域传过来的信息
         */

    }, {
        key: "recevieData",
        value: function recevieData(message) {
            var type = message.type;
            switch (type) {
                default:
                    break;
            }
        }
        /**
         * 上报自己的数据
         * @param data 上报数据
         */

    }, {
        key: "setSelfData",
        value: function setSelfData(data) {
            var kvDataList = [];
            var obj = {};
            obj.wxgame = {};
            obj.wxgame.value1 = data;
            obj.wxgame.update_time = Laya.Browser.now();
            kvDataList.push({ "key": this._key, "value": JSON.stringify(obj) });
            this.wx.setUserCloudStorage({
                KVDataList: kvDataList,
                success: function success(e) {
                    console.log('-----success:' + JSON.stringify(e));
                },
                fail: function fail(e) {
                    console.log('-----fail:' + JSON.stringify(e));
                },
                complete: function complete(e) {
                    console.log('-----complete:' + JSON.stringify(e));
                }
            });
        }

        /**
         * 设置list arr
         * @param arr 赋值用的arr
         */

    }, {
        key: "setlist",
        value: function setlist(arr) {
            this._list.array = arr;
            this._list.refresh();
        }
    }]);

    return BigRank;
}(_layaMaxUI.BigUI);

exports.default = BigRank;

},{"../ui/layaMaxUI":3}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL1NvZnR3YXJlL0xheWFBaXJJREUvcmVzb3VyY2VzL2FwcC9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwic3JjL0dhbWVDb25maWcuanMiLCJzcmMvTWFpbi5qcyIsInNyYy91aS9sYXlhTWF4VUkuanMiLCJzcmMvdmlldy9CaWdJdGVtLmpzIiwic3JjL3ZpZXcvQmlnUmFuay5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3FqQkNWQTs7O0FBQ0E7Ozs7Ozs7O0lBRXFCLFU7Ozs7Ozs7K0JBQ0g7QUFDVjtBQUNBLGdCQUFJLE1BQU0sS0FBSyxVQUFMLENBQWdCLFFBQTFCO0FBQ04sZ0JBQUksaUJBQUosRUFBc0IsaUJBQXRCO0FBQ0c7Ozs7OztrQkFMZ0IsVTs7QUFPckIsV0FBVyxLQUFYLEdBQW1CLEdBQW5CO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLElBQXBCO0FBQ0EsV0FBVyxTQUFYLEdBQXNCLFlBQXRCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLE1BQXhCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLEtBQXBCO0FBQ0EsV0FBVyxNQUFYLEdBQW9CLE1BQXBCO0FBQ0EsV0FBVyxVQUFYLEdBQXdCLGdCQUF4QjtBQUNBLFdBQVcsU0FBWCxHQUF1QixFQUF2QjtBQUNBLFdBQVcsS0FBWCxHQUFtQixLQUFuQjtBQUNBLFdBQVcsSUFBWCxHQUFrQixLQUFsQjtBQUNBLFdBQVcsWUFBWCxHQUEwQixLQUExQjtBQUNBLFdBQVcsaUJBQVgsR0FBK0IsSUFBL0I7O0FBRUEsV0FBVyxJQUFYOzs7Ozs7O0FDdkJBOzs7O0FBQ0E7Ozs7Ozs7O0lBQ00sSTtBQUNMLGlCQUFjO0FBQUE7O0FBQ2IsT0FBSyxtQkFBTCxHQUEyQixJQUEzQjtBQUNBLE9BQUssVUFBTCxHQUFrQixJQUFsQjtBQUNBO0FBQ0EsT0FBSyxJQUFMLENBQVUscUJB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QUFZLGVBQWUsS0FBSyxTQUFMLENBQWUsQ0FBZixDQUEzQjtBQUNILGlCQVB1QjtBQVF4QiwwQkFBUyxrQkFBUyxDQUFULEVBQVc7QUFDaEIsNEJBQVEsR0FBUixDQUFZLG1CQUFtQixLQUFLLFNBQUwsQ0FBZSxDQUFmLENBQS9CO0FBQ0g7QUFWdUIsYUFBNUI7QUFZSDs7QUFFRDs7Ozs7OztnQ0FJUSxHLEVBQUk7QUFDUixpQkFBSyxLQUFMLENBQVcsS0FBWCxHQUFrQixHQUFsQjtBQUNBLGlCQUFLLEtBQUwsQ0FBVyxPQUFYO0FBQ0g7Ozs7RUE1SDRCLGdCOztrQkFBaEIsTyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcbn0pKCk7XHJcbihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvKipUaGlzIGNsYXNzIGlzIGF1dG9tYXRpY2FsbHkgZ2VuZXJhdGVkIGJ5IExheWFBaXJJREUsIHBsZWFzZSBkbyBub3QgbWFrZSBhbnkgbW9kaWZpY2F0aW9ucy4gKi9cclxuaW1wb3J0IEJpZ0l0ZW0gZnJvbSBcIi4vdmlldy9CaWdJdGVtXCJcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdhbWVDb25maWcge1xyXG4gICAgc3RhdGljIGluaXQoKSB7XHJcbiAgICAgICAgLy/ms6jlhoxTY3JpcHTmiJbogIVSdW50aW1l5byV55SoXHJcbiAgICAgICAgbGV0IHJlZyA9IExheWEuQ2xhc3NVdGlscy5yZWdDbGFzcztcclxuXHRcdHJlZyhcInZpZXcvQmlnSXRlbS5qc1wiLEJpZ0l0ZW0pO1xyXG4gICAgfVxyXG59XHJcbkdhbWVDb25maWcud2lkdGggPSA2NDA7XHJcbkdhbWVDb25maWcuaGVpZ2h0ID0gMTEzNjtcclxuR2FtZUNvbmZpZy5zY2FsZU1vZGUgPVwiZml4ZWR3aWR0aFwiO1xyXG5HYW1lQ29uZmlnLnNjcmVlbk1vZGUgPSBcIm5vbmVcIjtcclxuR2FtZUNvbmZpZy5hbGlnblYgPSBcInRvcFwiO1xyXG5HYW1lQ29uZmlnLmFsaWduSCA9IFwibGVmdFwiO1xyXG5HYW1lQ29uZmlnLnN0YXJ0U2NlbmUgPSBcInRlc3QvQmlnLnNjZW5lXCI7XHJcbkdhbWVDb25maWcuc2NlbmVSb290ID0gXCJcIjtcclxuR2FtZUNvbmZpZy5kZWJ1ZyA9IGZhbHNlO1xyXG5HYW1lQ29uZmlnLnN0YXQgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5waHlzaWNzRGVidWcgPSBmYWxzZTtcclxuR2FtZUNvbmZpZy5leHBvcnRTY2VuZVRvSnNvbiA9IHRydWU7XHJcblxyXG5HYW1lQ29uZmlnLmluaXQoKTtcclxuIiwiaW1wb3J0IEdhbWVDb25maWcgZnJvbSBcIi4vR2FtZUNvbmZpZ1wiO1xyXG5pbXBvcnQgQmlnUmFuayBmcm9tIFwiLi92aWV3L0JpZ1JhbmtcIjtcclxuY2xhc3MgTWFpbiB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRMYXlhLmlzV1hPcGVuRGF0YUNvbnRleHQgPSB0cnVlO1xyXG5cdFx0TGF5YS5pc1dYUG9zTXNnID0gdHJ1ZTtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0TGF5YS5pbml0KEdhbWVDb25maWcud2lkdGgsIEdhbWVDb25maWcuaGVpZ2h0LGZhbHNlKTtcclxuXHRcdC8v5qC55o2uSURF6K6+572u5Yid5aeL5YyW5byV5pOOXHRcdFxyXG5cdFx0TGF5YS5zdGFnZS5zY2FsZU1vZGUgPSBHYW1lQ29uZmlnLnNjYWxlTW9kZTtcclxuXHRcdExheWEuc3RhZ2Uuc2NyZWVuTW9kZSA9IEdhbWVDb25maWcuc2NyZWVuTW9kZTtcclxuXHRcdExheWEuc3RhZ2UuYWxpZ25WID0gR2FtZUNvbmZpZy5hbGlnblY7XHJcblx0XHRMYXlhLnN0YWdlLmFsaWduSCA9IEdhbWVDb25maWcuYWxpZ25IO1xyXG5cdFx0Ly8g5YWz5LqO6YCP5Lyg5o6l5Y+j77yM6K+35Y+C6ICDOiBodHRwczovL2xkYzIubGF5YWJveC5jb20vZG9jLz9uYXY9emgtdHMtNS0wLTdcclxuXHRcdGlmKExheWEuQnJvd3Nlci5vbk1pbmlHYW1lKVxyXG5cdFx0XHRcdHd4Lm9uTWVzc2FnZShmdW5jdGlvbihkYXRhKXtcclxuXHRcdFx0XHRcdGlmKGRhdGEudXJsID09IFwicmVzL2F0bGFzL3Rlc3QuYXRsYXNcIiApe1xyXG5cdFx0XHRcdFx0XHRcdExheWEubG9hZGVyLmxvYWQoXCJyZXMvYXRsYXMvdGVzdC5hdGxhc1wiLExheWEuSGFuZGxlci5jcmVhdGUodGhpcyx0aGlzLm9uQ29tcGxldGUpKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9LmJpbmQodGhpcykpO1xyXG5cdFx0ZWxzZVxyXG5cdFx0XHRMYXlhLmxvYWRlci5sb2FkKFwicmVzL2F0bGFzL3Rlc3QuYXRsYXNcIixMYXlhLkhhbmRsZXIuY3JlYXRlKHRoaXMsdGhpcy5vbkNvbXBsZXRlKSk7XHJcblx0fVxyXG5cclxuXHRvbkNvbXBsZXRlKCkge1xyXG5cdFx0Ly/liqDovb1JREXmjIflrprnmoTlnLrmma9cclxuXHRcdHZhciBiaWcgPSBuZXcgQmlnUmFuaygpO1xyXG5cdFx0YmlnLmluaXQoKTtcclxuXHR9XHJcbn1cclxuLy/mv4DmtLvlkK/liqjnsbtcclxubmV3IE1haW4oKTtcclxuIiwiLyoqVGhpcyBjbGFzcyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBieSBMYXlhQWlySURFLCBwbGVhc2UgZG8gbm90IG1ha2UgYW55IG1vZGlmaWNhdGlvbnMuICovXHJcbnZhciBWaWV3PWxheWEudWkuVmlldztcclxudmFyIERpYWxvZz1sYXlhLnVpLkRpYWxvZztcclxudmFyIFNjZW5lPUxheWEuU2NlbmU7XHJcbnZhciBSRUcgPSBMYXlhLkNsYXNzVXRpbHMucmVnQ2xhc3M7XHJcbmV4cG9ydCBjbGFzcyBCaWdVSSBleHRlbmRzIFZpZXcge1xyXG5cdGNvbnN0cnVjdG9yKCl7IFxyXG5cdFx0c3VwZXIoKTtcclxuXHR9XHJcblx0Y3JlYXRlQ2hpbGRyZW4oKSB7XHJcblx0XHRzdXBlci5jcmVhdGVDaGlsZHJlbigpO1xyXG5cdFx0dGhpcy5jcmVhdGVWaWV3KEJpZ1VJLnVpVmlldyk7XHJcblx0fVxyXG5cdFxyXG59XHJcbkJpZ1VJLnVpVmlldz17XCJ0eXBlXCI6XCJWaWV3XCIsXCJwcm9wc1wiOntcIndpZHRoXCI6NjEwLFwiaGVpZ2h0XCI6NzU3fSxcImNvbXBJZFwiOjIsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJTcHJpdGVcIixcInByb3BzXCI6e1wieVwiOjAsXCJ4XCI6MCxcInRleHR1cmVcIjpcInRlc3QvMi5wbmdcIn0sXCJjb21wSWRcIjo0fSx7XCJ0eXBlXCI6XCJMaXN0XCIsXCJwcm9wc1wiOntcInlcIjoxMDcsXCJ4XCI6MTMsXCJ3aWR0aFwiOjU4NSxcInZhclwiOlwiX2xpc3RcIixcInZTY3JvbGxCYXJTa2luXCI6XCIgXCIsXCJzcGFjZVlcIjoyMCxcInJlcGVhdFhcIjoxLFwiaGVpZ2h0XCI6NjM5LFwiZWxhc3RpY0VuYWJsZWRcIjp0cnVlfSxcImNvbXBJZFwiOjMsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJiaWdJdGVtXCIsXCJwcm9wc1wiOntcInJ1bnRpbWVcIjpcInZpZXcvQmlnSXRlbS5qc1wiLFwicmVuZGVyVHlwZVwiOlwicmVuZGVyXCJ9LFwiY29tcElkXCI6NX1dfV0sXCJsb2FkTGlzdFwiOltcInRlc3QvMi5wbmdcIl0sXCJsb2FkTGlzdDNEXCI6W119O1xyXG5SRUcoXCJ1aS50ZXN0LkJpZ1VJXCIsQmlnVUkpO1xyXG5leHBvcnQgY2xhc3MgQmlnSXRlbVVJIGV4dGVuZHMgVmlldyB7XHJcblx0Y29uc3RydWN0b3IoKXsgXHJcblx0XHRzdXBlcigpO1xyXG5cdH1cclxuXHRjcmVhdGVDaGlsZHJlbigpIHtcclxuXHRcdHN1cGVyLmNyZWF0ZUNoaWxkcmVuKCk7XHJcblx0XHR0aGlzLmNyZWF0ZVZpZXcoQmlnSXRlbVVJLnVpVmlldyk7XHJcblx0fVxyXG5cdFxyXG59XHJcbkJpZ0l0ZW1VSS51aVZpZXc9e1widHlwZVwiOlwiVmlld1wiLFwicHJvcHNcIjp7XCJ3aWR0aFwiOjU4MCxcImhlaWdodFwiOjEwMH0sXCJjb21wSWRcIjoyLFwiY2hpbGRcIjpbe1widHlwZVwiOlwiU3ByaXRlXCIsXCJwcm9wc1wiOntcInlcIjowLFwieFwiOjAsXCJ3aWR0aFwiOjU3NSxcInRleHR1cmVcIjpcInRlc3QvMy5wbmdcIixcImhlaWdodFwiOjk5fSxcImNvbXBJZFwiOjd9LHtcInR5cGVcIjpcIkltYWdlXCIsXCJwcm9wc1wiOntcInlcIjo2LFwieFwiOjIyLFwid2lkdGhcIjo4MCxcInZhclwiOlwiaW1nX2hlYWRcIixcInNraW5cIjpcInRlc3QvNC5wbmdcIixcImhlaWdodFwiOjgwfSxcImNvbXBJZFwiOjMsXCJjaGlsZFwiOlt7XCJ0eXBlXCI6XCJTcHJpdGVcIixcInByb3BzXCI6e1wieVwiOi0xLFwieFwiOi0xLFwid2lkdGhcIjo4MixcInRleHR1cmVcIjpcInRlc3QvYzEucG5nXCIsXCJyZW5kZXJUeXBlXCI6XCJtYXNrXCIsXCJoZWlnaHRcIjo4Mn0sXCJjb21wSWRcIjoxMH1dfSx7XCJ0eXBlXCI6XCJMYWJlbFwiLFwicHJvcHNcIjp7XCJ5XCI6MzguNSxcInhcIjoxMzYsXCJ3aWR0aFwiOjI1OSxcInZhclwiOlwidGV4dF9uYW1lXCIsXCJ0ZXh0XCI6XCLlkI3lrZdcIixcIm92ZXJmbG93XCI6XCJzY3JvbGxcIixcImhlaWdodFwiOjI0LFwiZm9udFNpemVcIjoyMCxcImZvbnRcIjpcIk1pY3Jvc29mdCBZYUhlaVwiLFwiY29sb3JcIjpcIiNmZmZmZmZcIixcImFsaWduXCI6XCJjZW50ZXJcIn0sXCJjb21wSWRcIjo0fSx7XCJ0eXBlXCI6XCJMYWJlbFwiLFwicHJvcHNcIjp7XCJ5XCI6NDIuNSxcInhcIjo0OTYsXCJ2YXJcIjpcInRleHRfc2NvcmVcIixcInRleHRcIjpcIuWIhuaVsFwiLFwiZm9udFNpemVcIjoyMCxcImNvbG9yXCI6XCIjZmZmZmZmXCIsXCJhbGlnblwiOlwiY2VudGVyXCJ9LFwiY29tcElkXCI6NX1dLFwibG9hZExpc3RcIjpbXCJ0ZXN0LzMucG5nXCIsXCJ0ZXN0LzQucG5nXCIsXCJ0ZXN0L2MxLnBuZ1wiXSxcImxvYWRMaXN0M0RcIjpbXX07XHJcblJFRyhcInVpLnRlc3QuQmlnSXRlbVVJXCIsQmlnSXRlbVVJKTsiLCJpbXBvcnQgeyBCaWdJdGVtVUkgfSBmcm9tIFwiLi4vdWkvbGF5YU1heFVJXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ0l0ZW0gZXh0ZW5kcyBCaWdJdGVtVUkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCl7IFxyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0IGRhdGFTb3VyY2UodmFsdWUpe1xyXG4gICAgICAgIGlmKCF2YWx1ZSlcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB0aGlzLmltZ19oZWFkLnNraW4gPSB2YWx1ZS5hdmF0YXJJUDtcclxuICAgICAgICAgICAgdGhpcy50ZXh0X25hbWUudGV4dCA9IHZhbHVlLlVzZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnRleHRfc2NvcmUudGV4dCA9IHZhbHVlLlJhbmtWYWx1ZTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IEJpZ1VJIH0gZnJvbSBcIi4uL3VpL2xheWFNYXhVSVwiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpZ1JhbmsgZXh0ZW5kcyBCaWdVSSB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7IFxyXG4gICAgICAgIHN1cGVyKCk7IFxyXG4gICAgICAgIHRoaXMuX2tleSA9IFwidGVzdDEwMDg2XCI7XHJcbiAgICAgICAgLy/pu5jorqTmlbDmja5cclxuICAgICAgICB0aGlzLmFyciA9IFtcclxuICAgICAgICAgICAge2luZGV4OjEsYXZhdGFySVA6J3Rlc3QvNC5wbmcnLFVzZXJOYW1lOlwi5rWL6K+V55So5oi3MVwiLFJhbmtWYWx1ZToxMDB9LFxyXG4gICAgICAgICAgICB7aW5kZXg6MixhdmF0YXJJUDondGVzdC80LnBuZycsVXNlck5hbWU6XCLmtYvor5XnlKjmiLcyXCIsUmFua1ZhbHVlOjc1fSxcclxuICAgICAgICAgICAge2luZGV4OjMsYXZhdGFySVA6J3Rlc3QvNC5wbmcnLFVzZXJOYW1lOlwi5rWL6K+V55So5oi3M1wiLFJhbmtWYWx1ZTo1MH0sXHJcbiAgICAgICAgICAgIHtpbmRleDo0LGF2YXRhcklQOid0ZXN0LzQucG5nJyxVc2VyTmFtZTpcIua1i+ivleeUqOaItzRcIixSYW5rVmFsdWU6MjV9XHJcbiAgICAgICAgXTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaW5pdCgpe1xyXG4gICAgICAgIC8v5bCG5Zy65pmv5Yqg5Yiw6Iie5Y+w5LiKXHJcbiAgICAgICAgTGF5YS5zdGFnZS5hZGRDaGlsZCh0aGlzKTtcclxuICAgICAgICAvL+iuvue9rum7mOiupOaVsOaNrlxyXG4gICAgICAgIHRoaXMuc2V0bGlzdCh0aGlzLmFycik7XHJcbiAgICAgICAgLy8gTGF5YS5zdGFnZS52aXNpYmxlICA9IGZhbHNlO1xyXG4gICAgICAgIGlmKExheWEuQnJvd3Nlci5vbk1pbmlHYW1lKXtcclxuICAgICAgICAgICAgLy/mjqXlj5fmnaXoh6rkuLvln5/nmoTkv6Hmga9cclxuICAgICAgICAgICAgd3gub25NZXNzYWdlKHRoaXMucmVjZXZpZURhdGEuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIC8vIOebtOaOpeWxleekuuaVsOaNrlxyXG4gICAgICAgICAgICB0aGlzLmdldEZyaWVuZERhdGEoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blpb3lj4vmjpLooYxcclxuICAgICAqL1xyXG4gICAgZ2V0RnJpZW5kRGF0YSgpe1xyXG4gICAgICAgIHZhciBfJHRoaXMgPSB0aGlzO1xyXG4gICAgICAgIHd4LmdldEZyaWVuZENsb3VkU3RvcmFnZSh7XHJcbiAgICAgICAgICAgIGtleUxpc3Q6W3RoaXMuX2tleV0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24ocmVzKXtcclxuICAgICAgICAgICAgICAgIC8v5YWz5LqO5ou/5Yiw55qE5pWw5o2u6K+m57uG5oOF5Ya15Y+v5Lul5Lqn55yL5b6u5L+h5paH5qGjXHJcbiAgICAgICAgICAgICAgICAvL2h0dHBzOi8vZGV2ZWxvcGVycy53ZWl4aW4ucXEuY29tL21pbmlnYW1lL2Rldi9hcGkvVXNlckdhbWVEYXRhLmh0bWxcclxuICAgICAgICAgICAgICAgIHZhciBsaXN0RGF0YTtcclxuICAgICAgICAgICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgICAgICAgICB2YXIga3Y7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJyID0gW107XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS1nZXRGcmllbmRDbG91ZFN0b3JhZ2UtLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICAgICAgIGlmKHJlcy5kYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwO2k8cmVzLmRhdGEubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iaiA9IHJlcy5kYXRhW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZighKG9iai5LVkRhdGFMaXN0Lmxlbmd0aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+aLieWPluaVsOaNruaYr++8jOS9v+eUqOS6huWkmuWwkeS4qmtleS0gS1ZEYXRhTGlzdOeahOaVsOe7hOWwseacieWkmuWwkVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL+abtOivpue7hueahEtWRGF0YeWPr+S7peafpeeci+W+ruS/oeaWh+ahozpodHRwczovL2RldmVsb3BlcnMud2VpeGluLnFxLmNvbS9taW5pZ2FtZS9kZXYvYXBpL0tWRGF0YS5odG1sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGt2ID0gb2JqLktWRGF0YUxpc3RbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGt2LmtleSE9XyR0aGlzLl9rZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrdiA9IEpTT04ucGFyc2Uoa3YudmFsdWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLmF2YXRhcklQID0gb2JqLmF2YXRhclVybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdERhdGEuVXNlck5hbWUgPSBvYmoubmlja25hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLm9wZW5JRCA9IG9iai5vcGVuaWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLlJhbmtWYWx1ZSA9IGt2Lnd4Z2FtZS52YWx1ZTE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3REYXRhLnVwZGF0ZV90aW1lPWt2Lnd4Z2FtZS51cGRhdGVfdGltZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyLnB1c2gobGlzdERhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL+agueaNrlJhbmtWYWx1ZeaOkuW6j1xyXG4gICAgICAgICAgICAgICAgICAgIGFyciA9IGFyci5zb3J0KGZ1bmN0aW9uKGEsYil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBiLlJhbmtWYWx1ZSAtIGEuUmFua1ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5aKe5Yqg5LiA5Liq55So5LqO5p+l55yL55qEaW5kZXjmjpLlkI1cclxuICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpPCBhcnIubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFycltpXS5pbmRleCA9IGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvL+iuvue9ruaVsOe7hFxyXG4gICAgICAgICAgICAgICAgICAgIF8kdGhpcy5zZXRsaXN0KGFycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAsZmFpbDpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS0tLS0tLS0tLS0tLS0t6I635Y+W5omY566h5pWw5o2u5aSx6LSlLS0tLS0tLS0tLS0tLS0tLS0tLS0nKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaOpeaUtuS/oeaBr1xyXG4gICAgICAgICAqIEBwYXJhbSBtZXNzYWdlIOaUtuWIsOeahOS4u+Wfn+S8oOi/h+adpeeahOS/oeaBr1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlY2V2aWVEYXRhKG1lc3NhZ2Upe1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9IG1lc3NhZ2UudHlwZTtcclxuICAgICAgICAgICAgc3dpdGNoKHR5cGUpXHJcbiAgICAgICAgICAgIHsgICBcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5LiK5oql6Ieq5bex55qE5pWw5o2uXHJcbiAgICAgICAgICogQHBhcmFtIGRhdGEg5LiK5oql5pWw5o2uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0U2VsZkRhdGEoZGF0YSl7XHJcbiAgICAgICAgICAgIHZhciBrdkRhdGFMaXN0ID0gW107XHJcbiAgICAgICAgICAgIHZhciBvYmogPSB7fTtcclxuICAgICAgICAgICAgb2JqLnd4Z2FtZSA9e307XHJcbiAgICAgICAgICAgIG9iai53eGdhbWUudmFsdWUxID0gIGRhdGE7XHJcbiAgICAgICAgICAgIG9iai53eGdhbWUudXBkYXRlX3RpbWUgID0gTGF5YS5Ccm93c2VyLm5vdygpO1xyXG4gICAgICAgICAgICBrdkRhdGFMaXN0LnB1c2goe1wia2V5XCI6dGhpcy5fa2V5LFwidmFsdWVcIjpKU09OLnN0cmluZ2lmeShvYmopfSk7XHJcbiAgICAgICAgICAgIHRoaXMud3guc2V0VXNlckNsb3VkU3RvcmFnZSh7XHJcbiAgICAgICAgICAgICAgICBLVkRhdGFMaXN0Omt2RGF0YUxpc3QsXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLXN1Y2Nlc3M6JyArIEpTT04uc3RyaW5naWZ5KGUpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmYWlsOmZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCctLS0tLWZhaWw6JyArIEpTT04uc3RyaW5naWZ5KGUpKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTpmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnLS0tLS1jb21wbGV0ZTonICsgSlNPTi5zdHJpbmdpZnkoZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiuvue9rmxpc3QgYXJyXHJcbiAgICAgICAgICogQHBhcmFtIGFyciDotYvlgLznlKjnmoRhcnJcclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRsaXN0KGFycil7XHJcbiAgICAgICAgICAgIHRoaXMuX2xpc3QuYXJyYXkgPWFycjtcclxuICAgICAgICAgICAgdGhpcy5fbGlzdC5yZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG59Il19
